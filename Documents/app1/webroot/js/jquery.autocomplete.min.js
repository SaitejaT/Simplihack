jQuery.autocomplete=function(e,t){function d(){l={};l.data={};l.length=0}function w(){if(p==46||p>8&&p<32)return o.hide();var e=r.val();if(e==a)return;a=e;if(e.length>=t.minChars){i=$("#vauto input:radio:checked").val();if(!i){i=1}r.addClass(t.loadingClass);_(e,i)}else{r.removeClass(t.loadingClass);o.hide()}}function E(e){var t=$("li",s);if(!t)return;f+=e;if(f<0){f=0}else if(f>=t.size()){f=t.size()-1}t.removeClass("ac_over");$(t[f]).addClass("ac_over");if(t[f]&&t[f].scrollIntoView){t[f].scrollIntoView(false)}}function S(){var e=$("li.ac_over",s)[0];if(!e){var n=$("li",s);if(t.selectOnly){if(n.length==1)e=n[0]}else if(t.selectFirst){e=n[0]}}if(e){x(e);return true}else{return false}}function x(n){if(!n){n=document.createElement("li");n.extra=[];n.selectValue=""}var i=$.trim(n.selectValue?n.selectValue:n.innerHTML);e.lastSelected=i;a=i;o.html("");i=i.replace(/(<([^>]+)>)/ig,"");r.val(i);L();if(t.onItemSelect)setTimeout(function(){t.onItemSelect(n)},1)}function T(e,t){var n=r.get(0);if(n.createTextRange){var i=n.createTextRange();i.collapse(true);i.moveStart("character",e);i.moveEnd("character",t);i.select()}else if(n.setSelectionRange){n.setSelectionRange(e,t)}else{if(n.selectionStart){n.selectionStart=e;n.selectionEnd=t}}n.focus()}function N(e){if(p!=8){r.val(r.val()+e.substring(a.length));T(a.length,e.length)}}function C(){var n=F(e);var i=t.width>0?t.width:r.width();o.css({width:parseInt(i)+"px",top:n.y+e.offsetHeight+"px",left:n.x+"px"}).show()}function k(){if(u)clearTimeout(u);u=setTimeout(L,200)}function L(){if(u)clearTimeout(u);r.removeClass(t.loadingClass);if(o.is(":visible")){o.hide()}if(t.mustMatch){var n=r.val();if(n!=e.lastSelected){x(null)}}}function A(e,n){if(n){r.removeClass(t.loadingClass);s.innerHTML="";if(!h||n.length==0)return L();s.appendChild(M(n));if(t.autoFill&&r.val().toLowerCase()==e.toLowerCase())N(n[0][0]);C()}else{L()}}function O(e){if(!e)return null;var n=[];var r=e.split(t.lineSeparator);for(var i=0;i<r.length;i++){var s=$.trim(r[i]);if(s){n[n.length]=s.split(t.cellSeparator)}}return n}function M(e){var n=document.createElement("ul");var r=e.length;if(t.maxItemsToShow>0&&t.maxItemsToShow<r)r=t.maxItemsToShow;for(var i=0;i<r;i++){var s=e[i];if(!s)continue;var o=document.createElement("li");if(t.formatItem){o.innerHTML=t.formatItem(s,i,r);o.selectValue=s[0]}else{o.innerHTML=s[0];o.selectValue=s[0]}var u=null;if(s.length>1){u=[];for(var a=1;a<s.length;a++){u[u.length]=s[a]}}o.extra=u;n.appendChild(o);$(o).hover(function(){$("li",n).removeClass("ac_over");$(this).addClass("ac_over");f=$("li",n).indexOf($(this).get(0))},function(){$(this).removeClass("ac_over")}).click(function(e){e.preventDefault();e.stopPropagation();x(this)})}return n}function _(e,n){if(!t.matchCase)e=e.toLowerCase();var i=t.cacheLength?P(e,n):null;if(i){A(e,i)}else if(typeof t.url=="string"&&t.url.length>0){$.get(D(e,n),function(t){t=O(t);j(e,n,t);A(e,t)})}else{r.removeClass(t.loadingClass)}}function D(e,n){var r=t.url+"?q="+encodeURI(e)+"&tp="+encodeURI(n);for(var i in t.extraParams){r+="&"+i+"="+encodeURI(t.extraParams[i])}return r}function P(e,n){if(!e)return null;if(l.data[e+n.toString()])return l.data[e+n.toString()];if(t.matchSubset){for(var r=e.length-1;r>=t.minChars;r--){var i=e.substr(0,r);var s=l.data[i];if(s){var o=[];for(var u=0;u<s.length;u++){var a=s[u];var f=a[0];if(H(f,e)){o[o.length]=a}}return o}}}return null}function H(e,n){if(!t.matchCase)e=e.toLowerCase();var r=e.indexOf(n);if(r==-1)return false;return r==0||t.matchContains}function B(e,n){if(n)r.removeClass(t.loadingClass);var i=n?n.length:0;var s=null;for(var o=0;o<i;o++){var u=n[o];if(u[0].toLowerCase()==e.toLowerCase()){s=document.createElement("li");if(t.formatItem){s.innerHTML=t.formatItem(u,o,i);s.selectValue=u[0]}else{s.innerHTML=u[0];s.selectValue=u[0]}var a=null;if(u.length>1){a=[];for(var f=1;f<u.length;f++){a[a.length]=u[f]}}s.extra=a}}if(t.onFindValue)setTimeout(function(){t.onFindValue(s)},1)}function j(e,n,r){if(!r||!e||!t.cacheLength||!n)return;if(!l.length||l.length>t.cacheLength){d();l.length++}else if(!l[e]){l.length++}l.data[e+n.toString()]=r}function F(e){var t=e.offsetLeft||0;var n=e.offsetTop||0;while(e=e.offsetParent){t+=e.offsetLeft;n+=e.offsetTop}return{x:t,y:n}}var n=this;var r=$(e).attr("autocomplete","off");var i=1;if(t.inputClass)r.addClass(t.inputClass);var s=document.createElement("div");var o=$(s);o.hide().addClass(t.resultsClass).css("position","absolute");if(t.width>0)o.css("width",t.width);$("body").append(s);e.autocompleter=n;var u=null;var a="";var f=-1;var l={};var c=false;var h=false;var p=null;d();if(t.data!=null){var v="",m={},g=[];if(typeof t.url!="string")t.cacheLength=1;for(var y=0;y<t.data.length;y++){g=typeof t.data[y]=="string"?[t.data[y]]:t.data[y];if(g[0].length>0){v=g[0].substring(0,1).toLowerCase();if(!m[v])m[v]=[];m[v].push(g)}}for(var b in m){t.cacheLength++;j(b,m[b])}}r.keydown(function(e){p=e.keyCode;switch(e.keyCode){case 38:e.preventDefault();E(-1);break;case 40:e.preventDefault();E(1);break;case 9:case 13:if(S()){r.get(0).blur();e.preventDefault();r.focus()}break;default:f=-1;if(u)clearTimeout(u);u=setTimeout(function(){w()},t.delay);break}}).focus(function(){h=true}).blur(function(){h=false;k()});L();this.flushCache=function(){d()};this.setExtraParams=function(e){t.extraParams=e};this.findValue=function(){var e=r.val();i=$("#vauto input:radio:checked").val();if(!i){i=1}if(!t.matchCase){e=e.toLowerCase()}var n=t.cacheLength?P(e):null;if(n){B(e,n)}else if(typeof t.url=="string"&&t.url.length>0){$.get(D(e,i),function(t){t=O(t);j(e,t);B(e,t)})}else{B(e,null)}};};jQuery.fn.autocomplete=function(e,t,n){t=t||{};t.url=e;t.data=typeof n=="object"&&n.constructor==Array?n:null;t.inputClass=t.inputClass||"ac_input";t.resultsClass=t.resultsClass||"ac_results";t.lineSeparator=t.lineSeparator||"\n";t.cellSeparator=t.cellSeparator||"|";t.minChars=t.minChars||1;t.delay=t.delay||400;t.matchCase=t.matchCase||0;t.matchSubset=t.matchSubset||1;t.matchContains=t.matchContains||0;t.cacheLength=t.cacheLength||1;t.mustMatch=t.mustMatch||0;t.extraParams=t.extraParams||{};t.loadingClass=t.loadingClass||"ac_loading";t.selectFirst=t.selectFirst||false;t.selectOnly=t.selectOnly||false;t.maxItemsToShow=t.maxItemsToShow||-1;t.autoFill=t.autoFill||false;t.width=parseInt(t.width,10)||0;this.each(function(){var e=this;new jQuery.autocomplete(e,t)});return this};jQuery.fn.autocompleteArray=function(e,t){return this.autocomplete(null,t,e)};jQuery.fn.indexOf=function(e){for(var t=0;t<this.length;t++){if(this[t]==e)return t}return-1}
